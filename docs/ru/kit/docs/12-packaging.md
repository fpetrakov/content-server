---
title: Создание пакетов
---

> `svelte-kit package` в настоящее время является экспериментальным и не подпадает под действие правил семантического управления версиями. Несовместимые с обратной связью изменениями могут произойти в любом будущем выпуске.

Кроме создания web-приложений SvelteKit можно использовать также и для библиотек компонентов.

Содержимое папки `src/routes` является основой для приложения. А папка [`src/lib`](#moduli-$lib) просто хранит файлы внутренних библиотек.

Библиотека компонентов в SvelteKit имеет точно такую же структуру папок, но `src/lib` становится основой библиотеки, а `src/routes`может быть использована для документации или демо-сайта, показывающего работу библиотеки. Также можно использовать эту папку как "песочницу" во время разработки компонента.

Запуск команды `svelte-kit package` сгенерирует пакет в новой папке `package` (которую можно [настроить](#konfiguracziya-package)), содержащий следующие файлы:

- Все файлы из папки `src/lib`, если не [указаны](#konfiguracziya-package) какие-либо параметры `include`/`exclude`. Компоненты Svelte будут предварительно обработаны, файлы TypeScript будут преобразованы в JavaScript.
- Определения типов (файлы`d.ts`), которые генерируются для файлов Svelte, JavaScript и TypeScript. Для этого вам нужно установить `typescript >= 4.0.0` и `svelte2tsx >= 0.4.1`. Определения типов размещаются рядом с их реализацией, рукописные файлы `d.ts` копируются как есть. Можно [отключить генерацию](#konfiguracziya-package) этих файлов, но мы настоятельно рекомендуем не делать этого.
- Файл `package.json`, скопированный из корня проекта, со всеми полями, кроме поля `"scripts"`. Список зависимостей `"dependencies"` тоже будет скопирован, поэтому добавляйте пакеты, которые нужны для документации или демо-сайта, в поле `"devDependencies"`. Также будут добавлены поля `"type": "module"` и `"exports"`, если в исходном файле их нет.

Поле `"exports"` содержит файлы, которые будут доступны из модуля. По умолчанию сюда попадут все файлы из папки`src/lib`, только если их имя(или имя папки, в которых они содержатся) не начинаются с символа нижнего подчёркивания. Это поведение можно [изменить](#konfiguracziya-package). Если имеется файл `src/lib/index.js` или `src/lib/index.svelte`, то он станет корнем пакета.

Например, если имеется компонент `src/lib/Foo.svelte` и модуль `src/lib/index.js`, который реэкспортирует его, то пользователь вашего пакета сможет импортировать компонент любым из двух способов:

```js
// @filename: ambient.d.ts
declare module 'your-library';

// @filename: index.js
// ---cut---
import { Foo } from 'your-library';
```

```js
// @filename: ambient.d.ts
declare module 'your-library/Foo.svelte';

// @filename: index.js
// ---cut---
import Foo from 'your-library/Foo.svelte';
```

### Публикация

Для публикации полученного пакета выполните команду:

```sh
npm publish ./package
```
Приведенный выше `package` относится к сгенерированному имени каталога, измените его соответствующим образом, если вы указываете иную директорию в [`package.dir`](#konfiguracziya-package).

### Ограничения

Это относительно экспериментальная функция, которая ещё не полностью реализована. Все файлы, кроме файлов Svelte (предварительно обработанных) и файлов TypeScript (переработанных в JavaScript), копируются как есть.
